- ## 1. 구조
  - Pub-Sub 구조
  - Producer - Broker - Consumer
  - Producer는 broker에 지정된 토픽을 통해 consumer에 메시지를 전달
  - Consumer는 원하는 시간에 메시지를 pull하여 가져옴
  - 메시지의 **중복** 혹은 **역전**이 있음을 염두해 두어야 함

- ## 2. 기존 메시지 큐와의 차이점
  - 토픽을 구독한 다수의 사용자가 메시지를 수신 가능
  - 메시지를 consumer가 토픽에서 꺼내오는 방식
  - 디스크에 메시지를 저장하므로, 설정된 시간 이내에서 consume 하기 이전 메시지를 불러올 수 있음(개별 consumer의 offset을 통해서)
  - 다수의 메시지를 한 번에 전송하는 batch publish가 가능함

- ## 3. 프로듀서
  - 특정 토픽으로 메시지를 전달하는 역할

- ## 4. 컨슈머
  - 특정 토픽에서 메시지를 가져오는 역할

- ## 5. 컨슈머 그룹
  - 다수의 파티션이 존재하여 하나의 consumer로 메시지를 수신받는 것이 어려운 상황일 경우에 사용
  - n개의 파티션을 컨슈머 그룹 내부 m개의 컨슈머가 나누어 처리
  - 파티션의 개수(n)이 컨슈머 그룹 내부 컨슈머의 개수(m) 보다 많을 경우, 아무 일도 하지 않는 컨슈머가 발생
    => m < n 으로 설정하여야 함

- ## 6. 오프셋
  - consumer가 파티션에서 읽은 메시지의 마지막 위치
  - 오프셋이 메시지의 마지막 위치를 가리키도록 하는 것을 커밋이라고 함

- ## 7. 파티션
  - Broker에서 토픽으로 메시지를 전송받을 때, 다수의 메시지를 분산하여 받기 위한 분리된 공간
  - 파티션이 1개일 경우, 메시지의 순서가 보장됨
  - 파티션이 2+개일 경우, 메시지의 순서는 보장되지 않지만, broker가 메시지를 받는 속도가 향상됨
  - 파티션은 해당 토픽을 삭제하기 전까지 줄일 수 없음(늘리는 것은 가능)

- ## 8. 커밋
  - 자동 커밋/수동 커밋이 있음
  - 자동 커밋의 경우 5초 마다 poll()을 호출할 때 마지막 오프셋을 커밋함
    => 컨슈머가 다운되거나 생성되어 rebalance 되는 경우 메시지의 중복이 발생할 수 있음
  - 수동 커밋의 경우 메시지 처리가 완료되었을 때 마지막 오프셋을 커밋함
    => 메시지를 처리 하는 도중에 발생한 장애 등으로 메시지의 중복이 발생할 수 있음
